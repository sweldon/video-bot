# Video Bot
This is a bot that chooses a ChatGPT-generated prompt
from an SQLite datbase, generates a voiceover using Whisper, queries and chooses a random background image from Giphy, generates captions using
gTTS, and finally combines them into a video

## Setup (Ubuntu / Windows + WSL2)
1. Create your Python virtual environment

    ```
    python3 -m venv venv && source venv/bin/activate
    ```

1. Install Python requirements

    ```
    pip install -r requirements.txt &&
    pip install stable-ts
    ```

1. Install Ubuntu packages

    ```
    sudo apt-get install imagemagick ffmpeg
    ```
    - Tweak Imagemagick config: https://askubuntu.com/a/879784

1. Create video output directory in root directory of this project
    ```
    mkdir output
    ```
    - If you're on Windows using WSL2, move the SQLite database (`data/post_prompts.db`) to a Windows directory

1. [Optional] Install 'Heavitas' font
    - Ubuntu/WSL2
        - Copy `fonts/Heavitas.ttf` to `/usr/local/share/fonts/`
            - Can also be downloaded from https://www.dafont.com/heavitas.font
        - Run `sudo fc-cache -f -v` to refresh the fonts

1. Generate a vid!
    ```
    export PEXELS_API_KEY="<insert api key here>" && python3 src/main.py --sqllite_path '/path/to/post_prompts.db' --output_dir 'output/'
    ```
    - Can also use `GIPHY_API_KEY` if leveraging `--bg_source giphy`

## Parameters
- [Required] sqllite_path: absolute path to the SQLite file containing prompts generated by OpenAI. The gTTS voice-overs are generated based on these.
- [Required] output_dir: directory where video outputs will be written. Folders will be created here named after each video
- title: If specified, will generate a video from the database matching this title
- bg_source: Source to use for background videos. Valid options are: `giphy`, `pexels`
- reuse_prompts: If this flag is provided, videos will not be flagged as used in the database, allowing you to regenerate them. Otherwise, you can only generate a video for a prompt once so theyre not duplicated

## SQLite Database
- [INT] id
- [TEXT] title
- [TEXT] content
- [BOOL] used
